<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="simple gallery">
    <title>{{ title }}</title>
    <link rel="icon" href="/favicon.ico">
    <style type="text/css" media="screen">
      .hidden { display: none }
      .active { display: block }
      body { background-color: #191919 }
      img { margin: auto }
      .buttons { text-align: center; padding-top: 1em }
      input { padding: 0 1em 0 1em}
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script type="text/javascript">
      $(window).load(function(){

          // Size all images to how big the browser is
          $('img').each( function() {
              var windowHeight = $(window).height() - 70
              var windowWidth = $(window).width() -70
              var imgHeight = $(this).height()
              var imgWidth = $(this).width()
              var ratio = Math.min(windowWidth / imgWidth, windowHeight / imgHeight)

              $(this).height(imgHeight * ratio)
              $(this).width(imgWidth * ratio)
          });

          // Make the first image of the gallery visible
          $('#gallery img:first-child').removeClass('hidden').addClass('active')

          // Cycle through images with 'next' and 'back'
          $('input').click(function() {
              var active = $('img.active')

              if (this.id == "next") {
                  var next = active.next()
                  active.removeClass('active').addClass('hidden')

                  if (next.length == 0){
                      $('#gallery img:first-child').removeClass('hidden').addClass('active')
                  } else if (next.is('img')) {
                      next.removeClass('hidden').addClass('active')
                  }
              } else if (this.id == "back") {
                  var prev = active.prev()
                  active.removeClass('active').addClass('hidden')

                  if (prev.length == 0){
                      $('#gallery img:last-child').removeClass('hidden').addClass('active')
                  } else {
                      prev.removeClass('hidden').addClass('active')
                  }
              }
              return false;
          });
      });
    </script>
  </head>
  <body>
    <div id="gallery">
      {% for image in images %}
      <img src="{{ image }}" class="hidden" />
      {% endfor %}
    </div>
    <div class="buttons">
      <input type="image" src="left.svg" id="back" value="Back" />
      <input type="image" src="right.svg" id="next" value="Next" />
    </div>
  </body>
</html>
